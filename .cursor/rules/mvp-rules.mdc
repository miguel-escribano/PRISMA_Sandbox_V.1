# PRISMA Development Rules

---

## Fase 1: MVP → Pitch (Completada ✅)

**Fecha límite:** 19 diciembre 2025  
**Resultado:** Pitch completado, v1.0-pitch estable

### Lo que funcionó

1. **No abstracciones prematuras** — Si solo se usa una vez, no hagas función/clase
2. **No manejo de errores exhaustivo** — Try/except básico
3. **No tests unitarios** — La demo ES el test
4. **Código que funcione** — Prioridad absoluta
5. **Hardcodear para la demo** — Valores fijos, JSON inline
6. **Commits frecuentes** — Cada feature que funcione, commit
7. **Plan B siempre** — Cada componente con fallback offline

> "If it works, ship it" — MVP mantra

---

## Fase 2: Estabilización (Actual)

**Desde:** 21 diciembre 2025  
**Objetivo:** Repo limpio, documentado, listo para v2.0

### ✅ SÍ HACER

1. **Documentar cambios** — Todo en CHANGELOG.md
2. **No romper v1.0-pitch** — Es la versión de referencia
3. **Refactorizar con cuidado** — Solo lo que moleste de verdad
4. **Tests manuales** — Probar antes de commit
5. **Limpiar código** — Eliminar scripts temporales, duplicados
6. **Organizar archivos** — Todo en su sitio

### ⛔ NO HACER (todavía)

1. **No features nuevas** — Primero estabilizar
2. **No cambios de arquitectura** — Eso es v2.0
3. **No integraciones nuevas** — Mantener lo que funciona
4. **No overengineering** — Sigue aplicando

---

## Fase 3: v2.0 (Q1 2026)

**Objetivo:** Producto real, no demo

### Ahora SÍ

- Tests automatizados para lo crítico
- Arquitectura limpia (separar concerns)
- Real APIs (AEMET, EFFIS, 112)
- Self-hosted FIWARE
- Configuración externa (no hardcoded)
- Manejo de errores robusto
- Múltiples entornos (dev/staging/prod)

---

## Arquitectura actual

```
streamlit/
├── app.py                    # UI principal
├── app_config/
│   ├── scenarios.py          # Definición de escenarios
│   ├── knowledge_base.py     # Base de conocimiento
│   └── AGENT_SYSTEM_PROMPT_CONTEXT.md

n8n/
├── PRISMA 1.0/               # Workflows estables
│   ├── PRISMA_OBSERVE 1.0.json
│   ├── PRISMA_ORIENT 2.0.json
│   └── PRISMA_DECIDE 2.0.json
└── drafts/                   # Experimentos

database/
├── schema.sql                # Schema Supabase
└── README.md

src/
├── fiware_client.py          # Cliente FIWARE
├── fiware_init_mvp.py        # Inicialización entidades
├── scenario_runner.py        # Runner de escenarios
└── config.py                 # → usa config.py en root
```

---

## Referencias

- **FIWARE:** `.cursor/commands/` para comandos NGSI-v2
- **Pitch:** `business/Pitch/PRISMA_PITCH_DECK.md`
- **n8n:** `n8n/PRISMA 1.0/README.md`
- **Database:** `database/README.md`
- **Changelog:** `CHANGELOG.md`

---

*Última actualización: 21 diciembre 2025*
